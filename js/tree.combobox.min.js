!function(){"use strict";var t=function(t){this.conf={data:null,target:null,multiselect:!1,noResultText:"No result found",placeholder:"Search...",selectOnLabel:!0,onSelect:null},this.tree=[];for(var e in this.conf)t.hasOwnProperty(e)&&(this.conf[e]=t[e]);return"string"==typeof this.conf.target?this.target=document.getElementById(this.conf.target.replace("#","")):this.target=this.conf.target,this.target?this.init():console.log("No target found")};t.prototype.init=function(){if(this.conf.data)return this.conf.multiselect?this.createTree(this.conf.data):this.createList(this.conf.data)},t.prototype.createTree=function(t){if(t instanceof Object)for(var e in t)this.tree.push(this.prepareElement(t[e]));else for(var e=0,n=t.length;e<n;e++)this.tree.push(this.prepareElement(t[e]));return this.tree.push('<div class="no-result">'+this.conf.noResultText+"</div>"),this.createDropdown()},t.prototype.createList=function(t){if(this.tree.push("<ul>"),t instanceof Object)for(var e in t)this.tree.push(this.prepareSingleElement(t[e]));else for(var e=0,n=t.length;e<n;e++)this.tree.push(this.prepareSingleElement(t[e]));return this.tree.push("</ul>"),this.tree.push('<div class="no-result">'+this.conf.noResultText+"</div>"),this.createDropdown()},t.prototype.prepareSingleElement=function(t){this.tree.push('<li data-value="'+t.id+'" data-name="'+t.name+'">'),this.tree.push('<span class="ct-name">'+t.name+"</span>"),this.tree.push("</li>")},t.prototype.prepareElement=function(t){var e=['<ul><li class="'+(t.items?"parent":"child")+'">'];if(t.items&&e.push("<span>"+n.arrow+"</span>"),e.push('<input type="checkbox" data-name="'+t.name+'" name="'+t.id+'" value="'+t.id+'">'),e.push('<span class="ct-name">'+t.name+"</span>"),t.items)if(t.items instanceof Object)for(var i in t.items)e.push(this.prepareElement(t.items[i]));else for(var i=0,s=t.items.length;i<s;i++)e.push(this.prepareElement(t.items[i]));return e.push("</li></ul>"),e.join("")},t.prototype.createDropdown=function(){this.dropdown=document.createElement("div"),this.dropdown.className="ct-container "+(this.conf.multiselect?"multiselect":"singleselect");var t=document.createElement("div");t.className="ct-input";var e=document.createElement("span");return e.className="ct-search-icon",e.innerHTML=n.search,this.input=document.createElement("input"),this.input.setAttribute("type","text"),this.input.setAttribute("placeholder",this.conf.placeholder),this.input.className="form-control",t.appendChild(this.input),t.appendChild(e),this.dropdown.appendChild(t),this.conf.multiselect?(this.tagContainer=document.createElement("div"),this.tagContainer.className="ct-tag-container",this.dropdown.appendChild(this.tagContainer)):(this.clearBtn=document.createElement("span"),this.clearBtn.className="ct-clear",this.clearBtn.innerHTML=n.clear,t.appendChild(this.clearBtn)),this.list=document.createElement("div"),this.list.className="ct-list",this.list.innerHTML=this.tree.join(""),this.dropdown.appendChild(this.list),this.populate()},t.prototype.populate=function(t){return this.target.parentNode.insertBefore(this.dropdown,this.target.nextSibling),this.target.style.display="none",this.addEvents()},t.prototype.addEvents=function(){var t=this.list.querySelectorAll("input"),e=this.list.querySelectorAll("li span");this.input.addEventListener("keyup",this.onInputKeyUp.bind(this)),this.input.addEventListener("focus",this.onInputFocus.bind(this)),this.conf.multiselect||this.clearBtn.addEventListener("click",this.clear.bind(this)),document.addEventListener("click",this.documentOnClick.bind(this));for(var n=0,i=t.length;n<i;n++)t[n].addEventListener("change",this.onChangeCheckbox.bind(this));for(var n=0,i=e.length;n<i;n++)e[n].addEventListener("click",this.onListClick.bind(this))},t.prototype.documentOnClick=function(t){e(t.target,".ct-container","closest")||this.dropdownClose()},t.prototype.onInputFocus=function(){for(var t=document.querySelectorAll(".ct-container.open"),e=0,n=t.length;e<n;e++)t[e].classList.remove("open");this.dropdownOpen()},t.prototype.dropdownOpen=function(){this.dropdown.classList.add("open")},t.prototype.dropdownClose=function(){this.dropdown.classList.remove("open")},t.prototype.firstItemOpen=function(){this.list.querySelector("li").classList.add("active")},t.prototype.clear=function(){for(var t=this.list.querySelectorAll("li.active"),e=0,n=t.length;e<n;e++)t[e].classList.remove("active");this.conf.multiselect&&(this.tagContainer.innerHTML=""),this.target.value="",this.input.value=""},t.prototype.onInputKeyUp=function(){var t=this.list.querySelectorAll("li"),n=this.input.value.toLowerCase(),i=!1;this.dropdown.classList.remove("noresult");for(var s=0,r=t.length;s<r;s++){var o=t[s].querySelector("span.ct-name").innerText.toLowerCase();if(t[s].classList[n.length?"add":"remove"]("hidden"),t[s].classList[n.length?"add":"remove"]("active"),t[s].classList.remove("ct-found"),o.indexOf(n)>-1&&n.length){t[s].classList.remove("hidden"),t[s].classList.add("ct-found");for(var a=e(t[s],"li","parents"),l=0,c=a.length;l<c;l++)a[l].classList.remove("hidden"),a[l].classList.add("active");i=!0}}!i&&n.length&&this.dropdown.classList.add("noresult"),n.length||this.firstItemOpen()},t.prototype.createTag=function(t){var e=document.createElement("div"),i=document.createElement("span");return e.className="ct-tag",e.innerHTML=t.getAttribute("data-name"),i.innerHTML=n.clear,i.setAttribute("data-value",t.value),i.addEventListener("click",this.removeTag.bind(this)),e.appendChild(i),this.tagContainer.appendChild(e)},t.prototype.removeTag=function(t){var e=this.list.querySelector('input[value="'+t.currentTarget.getAttribute("data-value")+'"]');return e&&(e.checked=!1),this.onChangeCheckbox()},t.prototype.onChangeCheckbox=function(){var t=this.list.querySelectorAll("input:checked"),e=[];this.tagContainer.innerHTML="";for(var n=0,i=t.length;n<i;n++)e.push(t[n].value),this.createTag(t[n]);this.target.value=e.join(",")},t.prototype.onListClick=function(t){if("INPUT"!==t.target.nodeName){var e=t.currentTarget.parentElement;if(e&&(this.conf.multiselect&&e.classList[e.classList.contains("active")?"remove":"add"]("active"),this.conf.selectOnLabel||!this.conf.multiselect))if(this.conf.multiselect){var n=e.querySelector("input");n.checked=!n.checked,this.onChangeCheckbox()}else this.target.value=e.getAttribute("data-value"),this.input.value=e.getAttribute("data-name"),this.dropdownClose();this.conf.multiselect||this.conf.onSelect&&"function"==typeof this.conf.onSelect&&this.conf.onSelect()}},t.prototype.destroy=function(){this.dropdown.remove(),this.target.style.display="block"};var e=function(t,e,n){if(Element.prototype.matches||(Element.prototype.matches=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(t){for(var e=(this.document||this.ownerDocument).querySelectorAll(t),n=e.length;--n>=0&&e.item(n)!==this;);return n>-1}),n&&"parents"===n){for(var i=[];t&&t!==document;t=t.parentNode)e?t.matches(e)&&i.push(t):i.push(t);return i}if(n&&"closest"===n){for(;t&&t!==document;t=t.parentNode)if(t.matches(e))return t;return null}},n={clear:'<svg width="1792" height="1792" viewBox="0 0 1792 1792"><path d="M1277 1122q0-26-19-45l-181-181 181-181q19-19 19-45 0-27-19-46l-90-90q-19-19-46-19-26 0-45 19l-181 181-181-181q-19-19-45-19-27 0-46 19l-90 90q-19 19-19 46 0 26 19 45l181 181-181 181q-19 19-19 45 0 27 19 46l90 90q19 19 46 19 26 0 45-19l181-181 181 181q19 19 45 19 27 0 46-19l90-90q19-19 19-46zm387-226q0 209-103 385.5t-279.5 279.5-385.5 103-385.5-103-279.5-279.5-103-385.5 103-385.5 279.5-279.5 385.5-103 385.5 103 279.5 279.5 103 385.5z"/></svg>',search:'<svg width="1792" height="1792" viewBox="0 0 1792 1792"><path d="M1216 832q0-185-131.5-316.5t-316.5-131.5-316.5 131.5-131.5 316.5 131.5 316.5 316.5 131.5 316.5-131.5 131.5-316.5zm512 832q0 52-38 90t-90 38q-54 0-90-38l-343-342q-179 124-399 124-143 0-273.5-55.5t-225-150-150-225-55.5-273.5 55.5-273.5 150-225 225-150 273.5-55.5 273.5 55.5 225 150 150 225 55.5 273.5q0 220-124 399l343 343q37 37 37 90z"/></svg>',arrow:'<svg width="1792" height="1792" viewBox="0 0 1792 1792"><path d="M1152 896q0 26-19 45l-448 448q-19 19-45 19t-45-19-19-45v-896q0-26 19-45t45-19 45 19l448 448q19 19 19 45z"/></svg>'};window.CTbox=t}();